<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Weather App</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&display=swap" rel="stylesheet">
  <link href="/css/site.css" rel="stylesheet">
</head>
<body>

<main class="main-container">

  <div class="location-and-date">
    <h1 class="location-and-date__location"><%=data.city%> , <%=data.country%></h1>
    <div><%=data.dayName%>, <%=data.fullDate%></div>
  </div>


  <div class="current-temperature">
    <div class="current-temperature__icon-container">
      <!-- <img src="/icons/mostly-sunny.svg" class="current-temperature__icon" alt=""> -->
      <img src="/icons/mostly-sunny.svg" onload="this.onload=null; this.src=icon(<%=data.iconId%>);" class="current-temperature__icon" alt="Image Not Available">
    </div>
    <div class="current-temperature__content-container">
      <div class="current-temperature__value"><%= Math.floor(data.temp)%>&deg;</div>
      <div class="current-temperature__summary"><%=data.description%></div>
    </div>
  </div>


  <div class="current-stats">
    <div>
      <div class="current-stats__value"><%=Math.ceil(data.temp_max)%>&deg;</div>
      <div class="current-stats__label">High</div>
      <div class="current-stats__value"><%=data.visibility%>m</div>
      <div class="current-stats__label">Visibility</div>
    </div>
    <div>
      <div class="current-stats__value"><%=Math.floor(data.wind)%>mph</div>
      <div class="current-stats__label">Wind</div>
      <div class="current-stats__value"><%=data.humidity%>%</div>
      <div class="current-stats__label">Humidity</div>
    </div>
    <div>
      <div class="current-stats__value"><%=data.sunrise%></div>
      <div class="current-stats__label">Sunrise</div>
      <div class="current-stats__value"><%=data.sunset%></div>
      <div class="current-stats__label">Sunset</div>
    </div>
  </div>

  
  <div class="next-5-days">
    <h2 class="next-5-days__heading">Next 5 days Forecast (3 hours Interval)</h2>
    <div class="next-5-days__container">
    <% for(var i = 0;i < data.forecast.length;i++){ %>
     <hr class="line">
      <div class="next-5-days__row">

        <div class="next-5-days__date">
          <div class="next-5-days__label"><%=data.forecast[i].dt_txt%></div>
        </div>

        <div class="next-5-days__low">
          <%=data.forecast[i].main.temp%>&deg;
          <div class="next-5-days__label">Temperature</div>
        </div>     
        
        <div class="next-5-days__high">
          <%=data.forecast[i].main.humidity%>%
          <div class="next-5-days__label">Humidity</div>
        </div>
        <!-- <div class="next-5-days__icon">
          <img src="/icons/sunny.svg" alt="Sunny">
        </div> -->
        <div class="next-5-days__wind">
          <%=data.forecast[i].wind.speed%> mph
          <div class="next-5-days__label">Wind</div>
        </div>

        <div class="next-5-days__rain">
          <%=data.forecast[i].visibility%>m
          <div class="next-5-days__label">Visibility</div>
        </div>
        
        
        <div class="next-5-days__rain">
          <%=data.forecast[i].weather[0].description%>
          <div class="next-5-days__label">Description</div>
        </div>
        

      </div>
      <br>
    <% } %>
     
    </div>
  </div>

  <script>
    // Function which returns the path of icon based on weather conditions
    function icon(iconId){
      var iconPath = "/icons/clear.svg";
      if(iconId == 800){
          iconPath = "/icons/clear.svg";
      }else if(iconId >= 200 && iconId <= 232){
          iconPath = "/icons/storm.svg";  
      }else if(iconId >= 600 && iconId <= 622){
          iconPath = "/icons/snow.svg";
      }else if(iconId >= 701 && iconId <= 781){
          iconPath = "/icons/haze.svg";
      }else if(iconId >= 801 && iconId <= 804){
          iconPath = "/icons/cloud.svg";
      }else if((iconId >= 500 && iconId <= 531) || (iconId >= 300 && iconId <= 321)){
          iconPath = "/icons/rain.svg";
      }
      return iconPath;
    }
  </script>

</main>

</body>
</html>